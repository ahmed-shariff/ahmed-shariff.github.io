<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@_ahmedshariff_"/><meta name="twitter:creator" content="@_ahmedshariff_"/><meta property="og:url" content="https://shariff-faleel.com/"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_CA"/><meta property="og:site_name" content="Personal website of Shariff Faleel"/><title>Experiment log - How I keep track of my ML experiments</title><meta name="robots" content="index,follow"/><meta name="description" content="Experiment log - How I keep track of my ML experiments"/><meta property="og:title" content="Experiment log - How I keep track of my ML experiments"/><meta property="og:description" content="Experiment log - How I keep track of my ML experiments"/><link rel="canonical" href="https://shariff-faleel.com/post/2018-06-11-Experiment-log"/><meta name="next-head-count" content="15"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous"/><script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js" integrity="sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p" crossorigin="anonymous"></script><script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script><link rel="preload" href="/_next/static/css/f99a4114f4ea0774.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f99a4114f4ea0774.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-2c3d125ac9294a66.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-1452d81522d66bc9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a6a74fa9337d991b.js" defer=""></script><script src="/_next/static/chunks/175675d1-a2f4b19cd9daa73f.js" defer=""></script><script src="/_next/static/chunks/706-5d4770c80855792c.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-8d11634093e6aeae.js" defer=""></script><script src="/_next/static/kGFwqiDWnFhA1yz3TO8P4/_buildManifest.js" defer=""></script><script src="/_next/static/kGFwqiDWnFhA1yz3TO8P4/_ssgManifest.js" defer=""></script><script src="/_next/static/kGFwqiDWnFhA1yz3TO8P4/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-col min-h-screen bg-slate-700"><header class="bg-gray-800 mb-0 md:mb-8 py-1 text-gray-300 md:sticky top-0 left-0 right-0 drop-shadow-lg shadow-gray-900 z-10"><div class="container mx-auto flex flex-col md:flex-row gap-x-12 items-center justify-center"><a class="transition duration-100 bg-transparent shadow-md shadow-transparent rounded-lg hover:shadow-gray-900 hover:bg-gray-700 hover:underline hover:decoration-2 px-4 py-2 items-center font-semibold text-lg" href="/">Shariff Faleel</a><a class="transition duration-100 bg-transparent shadow-md shadow-transparent rounded-lg hover:shadow-gray-900 hover:bg-gray-700 hover:underline hover:decoration-2 px-4 py-2 items-center undefined" href="/posts">Posts</a><a class="transition duration-100 bg-transparent shadow-md shadow-transparent rounded-lg hover:shadow-gray-900 hover:bg-gray-700 hover:underline hover:decoration-2 px-4 py-2 items-center undefined" href="/posts?pub=true">Publications</a><a class="transition duration-100 bg-transparent shadow-md shadow-transparent rounded-lg hover:shadow-gray-900 hover:bg-gray-700 hover:underline hover:decoration-2 px-4 py-2 items-center group" href="/"><div>Quick links<!-- --><svg fill="currentColor" viewBox="0 0 20 20" class="inline w-4 h-4 mt-1 ml-1 transition-transform duration-200 transform md:-mt-1 rotate-0 group-hover:rotate-180"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></div><div class="absolute w-full mt-2 origin-top-right rounded-md shadow-lg w-fit transition-transform transition-opacity ease-in-out duration-200 opacity-0 scale-0 group-hover:opacity-100 group-hover:scale-100"><div class="p-2 bg-gray-700 rounded-md shadow dark-mode:bg-gray-700"><div class="block px-4 py-2 rounded-lg hover:bg-gray-600 hover:underline hover:decoration-2 items-center justify-left flex flex-row space-x-2" href="https://gist.github.com/ahmed-shariff"> <!-- --><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div><div>github-gists</div></div><div class="block px-4 py-2 rounded-lg hover:bg-gray-600 hover:underline hover:decoration-2 items-center justify-left flex flex-row space-x-2" href="/posts.xml"> <!-- --><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"></path></svg></div><div>RSS feed</div></div></div></div></a></div></header><main class="container mx-auto flex-1"><div class="p-5 md:p-0 prose dark:prose-invert text-justify mx-auto max-w-screen-xl prose-img:block prose-img:m-auto prose-img:max-h-96 prose-p:w-full"><div class="text-xs text-slate-400">June 11, 2018<!-- --><div class="undefined flex gap-x-1 flex-wrap"><a class="text-gray-400" href="/posts?tags=machine+learning">#machine learning</a></div></div><h1 class="text-left">Experiment log - How I keep track of my ML experiments<!-- --></h1><div><p>For the past year I have been working on deep learning applications. As I was working I continuously automated various components of the development cycle/ experiments, which I finally pulled together as a basic <a href="https://github.com/ahmed-shariff/ml-pipeline">machine learning pipeline</a> (there is still alot that needs to be done there). It didn't take me long to run into the <em>technical dept in machine learning </em><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup><sup>,</sup><sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>. While the pipeline I had solved a few problems, there were other concerns that I needed to address. One of the biggest of them was keeping track of what I have done so far, and the decision process accompanying it. I did find myself running in circles butting heads with the same walls over and over. While I maintain extensive logs and use git keep track of the experiments I have done, they were not enough or inconvenient to keep track of the reasons and decision process behind the experiments. This lack of clarity was not only hampering my work flow, it was also quite annoying when I had to draw a progress report. I had to spend an unnecessarily huge chunk of time piecing together what I had done.</p>
<p>What I needed was a simple and coherent way to write down what I am doing and be able to refer to it from my logs or anywhere else. I use emacs for my daily work. Hence, I had org-mode at my disposal. I drew up a template to log experiments, I'll describing what I do in the rest of this article.</p>
<p>Each experiment is formatted as follows:</p>
<pre><code class="hljs language-md"><span class="hljs-bullet">*</span> TODO  [--ID property value--]--Brief description of the experiment-- [0%]   :@work:exp:
  :PROPERTIES:
  :ID:       --unique id, which can be used to identify this experiment with--
  :END:
  --Time stamp: indicting when the entry was created--
<span class="hljs-bullet">-</span> --A more detailed description of the experiment and notes also go here--

<span class="hljs-strong">** TODO Experiments [/]
1. [ ] --A numbered list of steps or sub tasks to complete, also the hash of the commit which competes this step--

**</span> TODO Conclusions
--When the experiment is complete--

</code></pre>
<p>Example log:</p>
<pre><code class="hljs language-md"><span class="hljs-bullet">*</span> TODO [201] ABC in XYZ model [0%]   :@work:exp:
  :PROPERTIES:
  :ID:       201
  :END:
  [2018-06-06 Wed 16:16]


<span class="hljs-bullet">-</span> Test if adding ABC to XYZ improves results.

<span class="hljs-strong">** TODO Experiments [1/2]
1. [x] Test XYZ without ABC (83d45cd) 
2. [ ] Test XYZ with ABC

**</span> TODO Conclusions

</code></pre>
<p>An accompanying git log for the experiment will look as follows:</p>
<pre><code class="hljs language-md">commit 83d45cd1128a8feda93af551ba099234fa52c48b
Author: Ahmed Shariff <span class="language-xml">&lt;ahmed.shariff@live.com&gt;</span>
Date:   Wed Jun 6 01:56:44 2018 +0530

<span class="hljs-code">    [e201.1] Results- XYZ without ABC
	
	Re trained the model XYZ with a modified data 
	pipeline for [e201]. The changes to the pipeline
	haven&#x27;t made much of a difference in the model.
</span>
</code></pre>
<ul>
<li>Each experiment is a TODO entry. The entry's heading contains a brief description of the experiment and tags. The tags I am using here are used by org for filtering when querying. The  <code>@work</code> tag I use for work related entries and <code>exp</code> for an entry that is related to experiments.</li>
<li>The properties drawer holds the ID of the experiment. I use this ID to refer to this entry. The commit message above refers to this entry in the experiment log as <code>[e201]</code>.</li>
<li>I use plain lists to take notes under the heading of the experiment. Usually the first bullet point explains the experiment.</li>
<li>The subheading <em>Experiments</em> is also a TODO entry. Under this heading I list the sub tasks I want to complete. I use a numbered list to allow me to refer to each sub task from an external source. The commit message refers to the first sub task as <code>[e201.1]</code>. Once I have completed a sub task I add the hash of the commit where the results were added.</li>
<li>The next subheading is the <em>Conclusions</em>, where I add the final results and related information.</li>
<li>Also as a habit, each time I implement something related to an experiment I add a commit with a reference to the related experiment before and after the training. Note that only the results and related code are added to git.</li>
<li>org mode helps with updating the TODO status and update completed percentage and sub tasks.</li>
<li>Whenever I am taking notes, under the Notes section or under the subtasks, I generally add an inactive timestamp and a related commit hash before the note.</li>
<li>For convenience I have the experiment log attached to a repo I use for my work. To avoid getting the commits turn to a mess, the edits to the experiment log file are always commited seperately.</li>
</ul>
<p>To help me with this process, I included a few snippets to my <code>.emacs</code>:</p>
<pre><code class="hljs language-emacs-lisp">;;I use capture to setup the template for any new experiment
(setq org-capture-templates
	'(... ;other capture templates
	  (&quot;e&quot; 
	   &quot;Add experiment&quot;
	   entry 
	   (file &quot;~/Research/FoodClassification/experiment_log.org&quot;)
	 &quot;\n* TODO &lt;&lt;%^{ID}&gt;&gt; %^{Experiment} [%] :@work:exp:%^g\n:PROPERTIES:
  :ID:       %\\1
  :END:\n- %^{Description}\n\n** Notes\n\n** TODO Experiments [/]\n%?\n** TODO Conclusions&quot;)))


;;Custom agenda to query experiments
(setq org-agenda-custom-commands
  '((&quot;c&quot; . &quot;My custom queries&quot;)
	(&quot;ci&quot; tags-todo &quot;LEVEL=1&amp;+exp/!INPROGRESS&quot;
	 ((org-agenda-files `(&quot;~/experiment_log.org&quot;))
	  (org-agenda-filter-by-top-headline)))
	(&quot;ct&quot; tags-todo &quot;LEVEL=1&amp;+exp/!TODO|WAIT&quot;
	 ((org-agenda-files `(&quot;~/experiment_log.org&quot;))
	  (org-agenda-filter-by-top-headline)))
	(&quot;ca&quot; tags-todo &quot;LEVEL=1&amp;+exp&quot;
	 ((org-agenda-files `(&quot;~/experiment_log.org&quot;))
	  (org-agenda-filter-by-top-headline)))
	(&quot;cd&quot; tags-todo &quot;LEVEL=1&amp;+exp/!DONE&quot;
	 ((org-agenda-files `(&quot;~/experiment_log.org&quot;))
	  (org-agenda-filter-by-top-headline)))))
</code></pre>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://papers.nips.cc/paper/5656-hidden-technical-debt-in-machine-learning-systems.pdf">Hidden Technical Debt in Machine Learning Systems</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://petewarden.com/2018/03/19/the-machine-learning-reproducibility-crisis/">The Machine Learning Reproducibility Crisis</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
</div><div class="m-4 border-t-4 border-slate-400/25"></div><giscus-widget id="comments" repo="ahmed-shariff/ahmed-shariff.github.io" repoid="MDEwOlJlcG9zaXRvcnkxMjU3MDU3Nzc=" category="Announcements" categoryid="DIC_kwDOB34eMc4COpxh" mapping="pathname" reactionsenabled="1" emitmetadata="0" inputposition="top" theme="light" lang="en" loading="lazy"></giscus-widget></div></main><div class="fixed bottom-4 right-4 drop-shadow-lg z-50 shadow-gray-900"><button><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="fill-sky-400 fill-gray-900 rounded-full bg-slate-600 hover:bg-slate-500" height="60" width="60" xmlns="http://www.w3.org/2000/svg"><path d="M256 464c114.9 0 208-93.1 208-208S370.9 48 256 48 48 141.1 48 256s93.1 208 208 208zm0-244.5l-81.1 81.9c-7.5 7.5-19.8 7.5-27.3 0s-7.5-19.8 0-27.3l95.7-95.4c7.3-7.3 19.1-7.5 26.6-.6l94.3 94c3.8 3.8 5.7 8.7 5.7 13.7 0 4.9-1.9 9.9-5.6 13.6-7.5 7.5-19.7 7.6-27.3 0l-81-79.9z"></path></svg></button></div><footer class="bg-gray-800 mt-8 py-4 text-gray-300 drop-shadow-lg shadow-gray-900"><div class="container mx-auto flex justify-center text-sm">© 2023 Shariff Faleel</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"2018-06-11-Experiment-log","frontmatter":{"layout":"post","comments":true,"title":"Experiment log - How I keep track of my ML experiments","tags":["machine learning"],"tagline":"In order to reduce the clutter, I keep track of the experiments using a emacs org-mode."},"content":"For the past year I have been working on deep learning applications. As I was working I continuously automated various components of the development cycle/ experiments, which I finally pulled together as a basic [machine learning pipeline](https://github.com/ahmed-shariff/ml-pipeline) (there is still alot that needs to be done there). It didn't take me long to run into the \u003cem\u003etechnical dept in machine learning \u003c/em\u003e[^fn-tech-debt-paper]\u003csup\u003e,\u003c/sup\u003e[^fn-reproduce-article]. While the pipeline I had solved a few problems, there were other concerns that I needed to address. One of the biggest of them was keeping track of what I have done so far, and the decision process accompanying it. I did find myself running in circles butting heads with the same walls over and over. While I maintain extensive logs and use git keep track of the experiments I have done, they were not enough or inconvenient to keep track of the reasons and decision process behind the experiments. This lack of clarity was not only hampering my work flow, it was also quite annoying when I had to draw a progress report. I had to spend an unnecessarily huge chunk of time piecing together what I had done.\n\nWhat I needed was a simple and coherent way to write down what I am doing and be able to refer to it from my logs or anywhere else. I use emacs for my daily work. Hence, I had org-mode at my disposal. I drew up a template to log experiments, I'll describing what I do in the rest of this article.\n\nEach experiment is formatted as follows:\n```md\n* TODO  [--ID property value--]--Brief description of the experiment-- [0%]   :@work:exp:\n  :PROPERTIES:\n  :ID:       --unique id, which can be used to identify this experiment with--\n  :END:\n  --Time stamp: indicting when the entry was created--\n- --A more detailed description of the experiment and notes also go here--\n\n** TODO Experiments [/]\n1. [ ] --A numbered list of steps or sub tasks to complete, also the hash of the commit which competes this step--\n\n** TODO Conclusions\n--When the experiment is complete--\n\n```\n\nExample log:\n```md\n* TODO [201] ABC in XYZ model [0%]   :@work:exp:\n  :PROPERTIES:\n  :ID:       201\n  :END:\n  [2018-06-06 Wed 16:16]\n\n\n- Test if adding ABC to XYZ improves results.\n\n** TODO Experiments [1/2]\n1. [x] Test XYZ without ABC (83d45cd) \n2. [ ] Test XYZ with ABC\n\n** TODO Conclusions\n\n```\n\nAn accompanying git log for the experiment will look as follows:\n```md\ncommit 83d45cd1128a8feda93af551ba099234fa52c48b\nAuthor: Ahmed Shariff \u003cahmed.shariff@live.com\u003e\nDate:   Wed Jun 6 01:56:44 2018 +0530\n\n    [e201.1] Results- XYZ without ABC\n\t\n\tRe trained the model XYZ with a modified data \n\tpipeline for [e201]. The changes to the pipeline\n\thaven't made much of a difference in the model.\n\n```\n\n- Each experiment is a TODO entry. The entry's heading contains a brief description of the experiment and tags. The tags I am using here are used by org for filtering when querying. The  \u003ccode\u003e@work\u003c/code\u003e tag I use for work related entries and \u003ccode\u003eexp\u003c/code\u003e for an entry that is related to experiments. \n- The properties drawer holds the ID of the experiment. I use this ID to refer to this entry. The commit message above refers to this entry in the experiment log as \u003ccode\u003e[e201]\u003c/code\u003e. \n- I use plain lists to take notes under the heading of the experiment. Usually the first bullet point explains the experiment.\n- The subheading \u003cem\u003eExperiments\u003c/em\u003e is also a TODO entry. Under this heading I list the sub tasks I want to complete. I use a numbered list to allow me to refer to each sub task from an external source. The commit message refers to the first sub task as \u003ccode\u003e[e201.1]\u003c/code\u003e. Once I have completed a sub task I add the hash of the commit where the results were added.\n- The next subheading is the \u003cem\u003eConclusions\u003c/em\u003e, where I add the final results and related information.\n- Also as a habit, each time I implement something related to an experiment I add a commit with a reference to the related experiment before and after the training. Note that only the results and related code are added to git.\n- org mode helps with updating the TODO status and update completed percentage and sub tasks. \n- Whenever I am taking notes, under the Notes section or under the subtasks, I generally add an inactive timestamp and a related commit hash before the note. \n- For convenience I have the experiment log attached to a repo I use for my work. To avoid getting the commits turn to a mess, the edits to the experiment log file are always commited seperately.\n\nTo help me with this process, I included a few snippets to my \u003ccode\u003e.emacs\u003c/code\u003e:\n```emacs-lisp\n;;I use capture to setup the template for any new experiment\n(setq org-capture-templates\n\t'(... ;other capture templates\n\t  (\"e\" \n\t   \"Add experiment\"\n\t   entry \n\t   (file \"~/Research/FoodClassification/experiment_log.org\")\n\t \"\\n* TODO \u003c\u003c%^{ID}\u003e\u003e %^{Experiment} [%] :@work:exp:%^g\\n:PROPERTIES:\n  :ID:       %\\\\1\n  :END:\\n- %^{Description}\\n\\n** Notes\\n\\n** TODO Experiments [/]\\n%?\\n** TODO Conclusions\")))\n\n\n;;Custom agenda to query experiments\n(setq org-agenda-custom-commands\n  '((\"c\" . \"My custom queries\")\n\t(\"ci\" tags-todo \"LEVEL=1\u0026+exp/!INPROGRESS\"\n\t ((org-agenda-files `(\"~/experiment_log.org\"))\n\t  (org-agenda-filter-by-top-headline)))\n\t(\"ct\" tags-todo \"LEVEL=1\u0026+exp/!TODO|WAIT\"\n\t ((org-agenda-files `(\"~/experiment_log.org\"))\n\t  (org-agenda-filter-by-top-headline)))\n\t(\"ca\" tags-todo \"LEVEL=1\u0026+exp\"\n\t ((org-agenda-files `(\"~/experiment_log.org\"))\n\t  (org-agenda-filter-by-top-headline)))\n\t(\"cd\" tags-todo \"LEVEL=1\u0026+exp/!DONE\"\n\t ((org-agenda-files `(\"~/experiment_log.org\"))\n\t  (org-agenda-filter-by-top-headline)))))\n```\n\n[^fn-tech-debt-paper]: [Hidden Technical Debt in Machine Learning Systems](https://papers.nips.cc/paper/5656-hidden-technical-debt-in-machine-learning-systems.pdf)\n\n[^fn-reproduce-article]: [The Machine Learning Reproducibility Crisis](https://petewarden.com/2018/03/19/the-machine-learning-reproducibility-crisis/)\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2018-06-11-Experiment-log"},"buildId":"kGFwqiDWnFhA1yz3TO8P4","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>